<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CommandLineParser.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">hw9</a> &gt; <a href="index.source.html" class="el_package">Controller</a> &gt; <span class="el_source">CommandLineParser.java</span></div><h1>CommandLineParser.java</h1><pre class="source lang-java linenums">package Controller;

import Model.InvalidTodoException;
import Model.Todo;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;

/**
 * CommandLineParser represents a class that validates a command line and gets information from it.
 */
public class CommandLineParser implements ICmdParser&lt;HashMap&lt;String, Object&gt;&gt; {

  protected static final String CSV = &quot;csv&quot;;
  protected static final String ADD = &quot;add todo&quot;;
  protected static final String COMPLETE = &quot;complete todo&quot;;
  protected static final String DISPLAY = &quot;display todo&quot;;

  /**
   * Constructs a CommandLineParser.
   */
<span class="fc" id="L23">  public CommandLineParser() {</span>
<span class="fc" id="L24">  }</span>

  /**
   * Gets information from command line if it is valid.
   *
   * @param args - the input from the user.
   * @return - a Hashmap represents the path of the csv file, the information of &quot;add to do&quot; if it
   * contains, the information of &quot;complete to do&quot; if it contains, the information of &quot;display to
   * do&quot; if it contains,
   * @throws InvalidArgumentsException - catch invalid arguments.
   */
  public HashMap&lt;String, Object&gt; parse(String[] args)
      throws InvalidArgumentsException, InvalidTodoException {
<span class="fc" id="L37">    CmdParserCSV parserCSV = new CmdParserCSV();</span>
<span class="fc" id="L38">    CmdParserAdd parserAdd = new CmdParserAdd();</span>
<span class="fc" id="L39">    CmdParserComplete parserComplete = new CmdParserComplete();</span>
<span class="fc" id="L40">    CmdParserDisplay parserDisplay = new CmdParserDisplay();</span>

<span class="fc" id="L42">    HashMap&lt;String, Object&gt; result = new HashMap&lt;String, Object&gt;();</span>
<span class="fc" id="L43">    String csvPath = parserCSV.parse(args);</span>
<span class="fc" id="L44">    Todo addTodo = parserAdd.parse(args);</span>
<span class="fc" id="L45">    ArrayList&lt;Integer&gt; completeTodo = parserComplete.parse(args);</span>
<span class="fc" id="L46">    DisplayTodo displayTodo = parserDisplay.parse(args);</span>

    // must contain valid csv command
<span class="fc" id="L49">    result.put(CSV, csvPath);</span>
    // must contain at least one valid type of command
<span class="pc bpc" id="L51" title="1 of 6 branches missed.">    if (addTodo != null || completeTodo != null || displayTodo != null) {</span>
      //compare length of valid commands to the input command
      //if they are not equal, unexpected commands entered
<span class="fc bfc" id="L54" title="All 2 branches covered.">      if (this.getLength(args, csvPath, addTodo, completeTodo, displayTodo) == args.length) {</span>
<span class="fc" id="L55">        result.put(ADD, addTodo);</span>
<span class="fc" id="L56">        result.put(COMPLETE, completeTodo);</span>
<span class="fc" id="L57">        result.put(DISPLAY, displayTodo);</span>
<span class="fc" id="L58">        return result;</span>
      } else {
<span class="fc" id="L60">        throw new InvalidArgumentsException(&quot;unexpected commands entered&quot;);</span>
      }
    } else {
<span class="fc" id="L63">      throw new InvalidArgumentsException(&quot;no command of the three functionalities entered&quot;);</span>
    }
  }


  /**
   * Helper method gets the length of all valid commands.
   *
   * @param path         - the csv path getting from the command, as String.
   * @param addTodo      - the Todo object getting from the command, as Todo.
   * @param completeTodo - the list of id to be completed getting from the command, as Arraylist.
   * @param displayTodo  - the DisplayTodo object getting from the command, as DisplayTodo.
   * @return
   */
  private Integer getLength(String[] args, String path, Todo addTodo,
      ArrayList&lt;Integer&gt; completeTodo, DisplayTodo displayTodo) {
<span class="fc" id="L79">    Integer length = 0;</span>
<span class="fc" id="L80">    Integer CSV_LENGTH = 2;</span>
<span class="pc bpc" id="L81" title="1 of 2 branches missed.">    if (path != null) {</span>
<span class="fc" id="L82">      length += CSV_LENGTH;</span>
<span class="fc" id="L83">      length += this.getAddCommandLength(args, addTodo)</span>
<span class="fc" id="L84">          + this.getCompleteCommandLength(completeTodo)</span>
<span class="fc" id="L85">          + this.getDisplayCommandLength(displayTodo);</span>
    }
<span class="fc" id="L87">    return length;</span>
  }

  /**
   * Helper method checks the length of valid commands of adding todo.
   *
   * @param addTodo - the Todo object getting from the command, as Todo.
   * @return -the length of valid commands of adding todo.
   */
  private Integer getAddCommandLength(String[] args, Todo addTodo) {
<span class="fc" id="L97">    Integer length = 0;</span>
<span class="fc" id="L98">    Integer BASE_LEN = 3;</span>
<span class="fc" id="L99">    Integer COMPLETE_LEN = 1;</span>
<span class="fc" id="L100">    Integer DUE_LEN = 2;</span>
<span class="fc" id="L101">    Integer PRIORITY_LEN = 2;</span>
<span class="fc" id="L102">    Integer CATEGORY_LEN = 2;</span>
<span class="fc" id="L103">    String PRIORITY = &quot;--priority&quot;;</span>
<span class="fc bfc" id="L104" title="All 2 branches covered.">    if (addTodo != null) {</span>
<span class="fc" id="L105">      length += BASE_LEN;</span>
<span class="pc bpc" id="L106" title="1 of 2 branches missed.">      if (addTodo.getCompleted() == Boolean.TRUE) {</span>
<span class="fc" id="L107">        length += COMPLETE_LEN;</span>
      }
<span class="pc bpc" id="L109" title="1 of 2 branches missed.">      if (addTodo.getDue() != null) {</span>
<span class="fc" id="L110">        length += DUE_LEN;</span>
      }
<span class="fc" id="L112">      List&lt;String&gt; commandList = Arrays.asList(args);</span>
<span class="pc bpc" id="L113" title="1 of 2 branches missed.">      if (commandList.contains(PRIORITY)) {</span>
<span class="fc" id="L114">        length += PRIORITY_LEN;</span>
      }
<span class="pc bpc" id="L116" title="1 of 2 branches missed.">      if (addTodo.getCategory() != null) {</span>
<span class="fc" id="L117">        length += CATEGORY_LEN;</span>
      }
    }
<span class="fc" id="L120">    return length;</span>
  }

  /**
   * Helper method checks the length of valid commands of adding todo.
   *
   * @param completeTodo - the list of id to be completed getting from the command, as Arraylist.
   * @return -the length of valid commands of completing todo.
   */
  private Integer getCompleteCommandLength(ArrayList&lt;Integer&gt; completeTodo) {
<span class="fc" id="L130">    Integer length = 0;</span>
<span class="fc" id="L131">    Integer COMPLETE_LEN = 2;</span>
<span class="fc bfc" id="L132" title="All 2 branches covered.">    if (completeTodo != null) {</span>
<span class="fc" id="L133">      length += COMPLETE_LEN * (completeTodo.size());</span>
    }
<span class="fc" id="L135">    return length;</span>
  }

  /**
   * Helper method checks the length of valid commands of displaying todo.
   *
   * @param displayTodo - the DisplayTodo object getting from the command, as DisplayTodo.
   * @return -the length of valid commands of displaying todo.
   */
  private Integer getDisplayCommandLength(DisplayTodo displayTodo) {
<span class="fc" id="L145">    Integer length = 0;</span>
<span class="fc" id="L146">    Integer DISPLAY_LEN = 1;</span>
<span class="fc" id="L147">    Integer SHOW_INCOMPLETE_LEN = 1;</span>
<span class="fc" id="L148">    Integer SHOW_CATE_LEN = 2;</span>
<span class="fc" id="L149">    Integer SORT_LEN = 1;</span>

<span class="fc bfc" id="L151" title="All 2 branches covered.">    if (displayTodo != null) {</span>
<span class="fc" id="L152">      length += DISPLAY_LEN;</span>
<span class="fc bfc" id="L153" title="All 2 branches covered.">      if (displayTodo.getShowIncomplete() == Boolean.TRUE) {</span>
<span class="fc" id="L154">        length += SHOW_INCOMPLETE_LEN;</span>
      }
<span class="fc bfc" id="L156" title="All 2 branches covered.">      if (displayTodo.getShowCategory() != null) {</span>
<span class="fc" id="L157">        length += SHOW_CATE_LEN;</span>
      }
<span class="fc bfc" id="L159" title="All 2 branches covered.">      if (displayTodo.getSortByDate() == Boolean.TRUE) {</span>
<span class="fc" id="L160">        length += SORT_LEN;</span>
      }
<span class="fc bfc" id="L162" title="All 2 branches covered.">      if (displayTodo.getSortByPriority() == Boolean.TRUE) {</span>
<span class="fc" id="L163">        length += SORT_LEN;</span>
      }
    }
<span class="fc" id="L166">    return length;</span>
  }

  /**
   * Get the string of the object
   *
   * @return the string of the object
   */
  @Override
  public String toString() {
<span class="fc" id="L176">    return &quot;CommandLineParser{}&quot;;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>